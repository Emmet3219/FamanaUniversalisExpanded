namespace = nafa

country_event = {
    id = nafa.1
    title = nafa.1.t
    desc = nafa.1.d
    picture = MILITARY_CAMP_eventPicture

    fire_only_once = yes

    trigger = {
        tag = NAF
    }
           
    mean_time_to_happen = {
        months = 32
    }
    option = {
        name = nafa.1.a
		add_country_modifier = { name = "jzoet_help" duration = -1 }
        custom_tooltip = nafa_jzoet_tt
    }
}

country_event = {
    id = nafa.2
    title = nafa.2.t
    desc = nafa.2.d
    picture = COURT_eventPicture

    trigger = {
        tag = NAF
        NOT = {
            has_heir = yes
        }
        NOT = {
            has_country_flag = nafaWaitingForHeir
        }
    }

    immediate = {
        set_country_flag = nafaWaitingForHeir
    }

    mean_time_to_happen = {
        months = 6
    }

    option = {
        name = nafa.2.a
        ai_chance = { factor = 1 }
        define_heir	= {
            name = "Syadon"
            dynasty = "Noy"
            claim = 100
            male = yes
            culture = ROOT
            religion = ROOT
        }
        hidden_effect = {
            clr_country_flag = nafaWaitingForHeir
        }
    }
}

country_event = {
    id = nafa.3
    title = nafa.3.t
    desc = nafa.3.d
    picture = CITY_VIEW_eventPicture
    is_triggered_only = yes

    option = {
        name = nafa.3.a
        ai_chance = { factor = 1 }
        add_ruler_modifier = {
            name = syadons_conquests
            duration = -1
        }
        add_yearly_manpower = 1.5
    }
}

country_event = {
    id = nafa.4
    title = nafa.4.t
    desc = nafa.4.d
    picture = MILITARY_CAMP_eventPicture
    is_triggered_only = yes
    major = yes

    option = { #Accept
        name = nafa.4.a
        ai_chance = {
            factor = 4
            modifier = {
                factor = 10
                tag = JFX
                has_disaster = tonxara_disaster
            }
            modifier = {
                factor = 4
                tag = JFX
                has_disaster_progress = {
                    disaster = tonxara_disaster
                    value = 50
                }
            }
            modifier = {
                factor = 2
                NOT = {
                    border_distance = {
                        who = NAF
                        distance = 50
                    }
                }
            }
            modifier = {
                factor = 2
                religion_group = lathvy_group
            }
            modifier = {
                factor = 4
                religious_school = {
                    group = lathvy_group
                    school = nafan_school
                }
            }
            modifier = {
                factor = 2.5
                NOT = {
                    total_development = 50
                }
            }
        }
        NAF = {
            inherit = ROOT
        }
    }

    option = { #Decline
        name = nafa.4.b
        ai_chance = {
            factor = 1
            modifier = {
                factor = 1000
                OR = {
                    tag = GAX
                    tag = PXS
                    AND = {
                        tag = JFX
                        NOT = {
                            OR = {
                                has_disaster_progress = {
                                    disaster = tonxara_disaster
                                    value = 50
                                }
                                has_disaster = tonxara_disaster
                            }
                        }
                    }
                }
            }
            modifier = {
                factor = 4
                OR = {
                    tag = MOR
                    tag = DEL
                    tag = MSH
                    tag = VNA
                }
            }
            modifier = {
                factor = 2
                total_development = 250
                NOT = {
                    tag = JFX
                }
            }
            modifier = {
                factor = 10
                total_development = 500
                NOT = {
                    tag = JFX
                }
            }
            modifier = {
                factor = 1000
                government_rank = 3
            }
            modifier = {
                factor = 2.5
                government_rank = 2
            }
            modifier = {
                factor = 10
                OR = {
                    is_rival = NAF
                    is_enemy = NAF
                }
            }
            modifier = {
                factor = 10
                num_of_owned_provinces_with = {
                    value = 10
                    NOT = {
                        OR = {
                            region = south_xalia_region
                            region = west_xalia_region
                            region = east_xalia_region
                            region = north_xalia_region
                        }
                    }
                }
            }
            modifier = {
                factor = 5
                NAF = {
                    NOT = {
                        total_development = 1000
                    }
                }
            }
            modifier = {
                factor = 10
                NAF = {
                    NOT = {
                        total_development = 500
                    }
                }
            }
            modifier = {
                factor = 1000
                NAF = {
                    NOT = {
                        total_development = 250
                    }
                }
            }
        }
        custom_tooltip = NafaGetCoresOnOurLand
        hidden_effect = {
            every_owned_province = {
                limit = {
                    OR = {
                        region = south_xalia_region
                        region = west_xalia_region
                        region = east_xalia_region
                        region = north_xalia_region
                    }
                }
                remove_claim = NAF
                add_core = NAF
            }
        }
        add_country_modifier = {
            name = naf_desperate_struggle
            duration = 9125
        }
    }
}

country_event = { #subject get cores
    id = nafa.5
    title = nafa.5.t
    desc = nafa.5.d
    picture = CITY_VIEW_eventPicture
    fire_only_once = yes
    hidden = yes

    mean_time_to_happen = {
        months = 1
    }

    trigger = {
        is_subject_of = NAF
        NAF = {
            has_country_flag = nafaOppianVassalFlag
        }
        any_owned_province = {
            OR = {
                region = upper_oppia_region
                region = lower_oppia_region
            }
        }
        is_year = 290
    }

    immediate = {
        every_province = {
            limit = {
                OR = {
                    region = upper_oppia_region
                    region = lower_oppia_region
                }
                NOT = {
                    owned_by = NAF
                }
            }
            add_core = ROOT
        }
        if = {
            limit = {
                OR = {
                    tag = NUT
                    tag = ROP
                }
            }
            NAF = {
                set_country_flag = nutiaRopleaVassalFlag
            }
        }
    }

    option = {
        name = nafa.5.a
        ai_chance = { factor = 1 }
    }
}

country_event = { #Kisholi nobles defect
    id = nafa.6
    title = nafa.6.t
    desc = nafa.6.d
    picture = CONQUEST_eventPicture

    mean_time_to_happen = {
        months = 6
    }

    trigger = {
        tag = NAF
        has_country_flag = naf_allow_annex_kisholi
        offensive_war_with = KSL
        KSL = {
            ai = yes
        }
        any_province = {
            owned_by = KSL
            controlled_by = ROOT
        }
        current_age = age_of_reformation
    }

    option = {
        name = nafa.6.a
        ai_chance = { factor = 1 }

        every_province = {
            limit = {
                superregion = jasua_superregion
                owned_by = KSL
                controlled_by = ROOT
            }
            cede_province = ROOT
            add_core = ROOT
            remove_core = KSL
            hidden_effect = {
                NAF = {
                    add_manpower = 0.5
                }
            }
        }
    }
}

country_event = {
    id = nafa.7
    title = nafa.7.t
    desc = nafa.7.d
    picture = CONQUEST_eventPicture
    fire_only_once = yes
    hidden = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        tag = NAF
        has_country_flag = nafa_extended_golden_age
        NOT = {
            in_golden_age = yes
        }
    }

    immediate = {
        add_country_modifier = {
            name = fu_extended_golden_age
            duration = 9125
        }
    }

    option = {
        name = nafa.7.a
        ai_chance = { factor = 1 }
    }
}

country_event = {
    id = nafa.8
    hidden = yes

    trigger = {
        tag = NAF
        has_country_flag = naf_army_merchant_flag
        NOT = { has_country_modifier = naf_armytradmerchant_cooldown }
    }

    mean_time_to_happen = {
        days = 1
    }

    immediate = {
        add_country_modifier = {
            name = naf_armytradmerchant_cooldown
            hidden = yes
            duration = 365
        }
        if = {
            limit = {
                5002 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                4997 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5321 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                4982 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5218 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                4981 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5066 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5103 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5121 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5140 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5442 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5552 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5388 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5361 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5167 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5196 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
        if = {
            limit = {
                5481 = {
                    has_merchant = PREV
                }
            }
            add_army_tradition = 0.1
        }
    }

    option = {
        name = nafa.8.a
        ai_chance = { factor = 1 }
    }
}

country_event = { #Defecting kisholi general
    id = nafa.9
    title = nafa.9.t
    desc = nafa.9.d
    picture = ADVISOR_eventPicture
    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = nafa.9.a
        ai_chance = { factor = 1 }
        define_general = {
            shock = 4
            fire = 4
            manuever = 5
            siege = 0
            trait = born_to_the_saddle_personality
            name = "Verakol Ranazha"
        }
        add_country_modifier = {
            name = naf_verakols_ideas
            duration = 3650
        }
        add_treasury = -100
    }

    option = {
        name = nafa.9.b
        ai_chance = { factor = 0 }
    }
}

country_event = { #Sar whispers
    id = nafa.10
    title = nafa.10.t
    desc = nafa.10.d
    picture = BAD_WITH_MONARCH_eventPicture
    fire_only_once = yes

    trigger = {
        tag = NAF
        TCK = {
            is_subject_of = NAF
            dynasty	= "Sar"
        }
        at_war_with_religious_enemy = yes
        current_age = age_of_absolutism
    }

    mean_time_to_happen = {
        months = 60
    }

    option = {
        name = nafa.10.a
        ai_chance = { factor = 1 }
        add_ruler_modifier = {
            name = naf_sar_insanity
            duration = -1
        }
    }
}

country_event = {
    id = nafa.11
    hidden = yes
    fire_only_once = yes

    trigger = {
        tag = NAF
        #ai = yes
        NOT = {
            mission_completed = eclipse_the_eclipse
        }
        is_year = 300
    }

    mean_time_to_happen = {
        months = 24
    }

    immediate = {
        complete_mission = eclipse_the_eclipse
        set_country_flag = getNafanMissions
        swap_non_generic_missions = yes
    }

    option = {
        name = nafa.11.a
        ai_chance = { factor = 1 }
    }
}

country_event = {
    id = nafa.12
    hidden = yes
    fire_only_once = yes

    trigger = {
        tag = KLG
        #ai = yes
        NOT = {
            mission_completed = eclipse_the_eclipse
        }
        is_year = 300
    }

    mean_time_to_happen = {
        months = 24
    }

    immediate = {
        complete_mission = eclipse_the_eclipse
        set_country_flag = getKalarganMissions
        swap_non_generic_missions = yes
    }

    option = {
        name = nafa.12.a
        ai_chance = { factor = 1 }
    }
}

country_event = { #Kalargan gov
    id = nafa.13
    title = nafa.13.t
    desc = nafa.13.d
    picture = GOOD_WITH_MONARCH_eventPicture
    fire_only_once = yes
    is_triggered_only = yes

    option = { #Republic
        name = nafa.13.a
        ai_chance = { factor = 1 }
        change_government = republic
        add_government_reform = kachik_republic
        add_prestige = -10
    }

    option = { #Monarchy
        name = nafa.13.b
        ai_chance = { factor = 1 }
        add_government_reform = kachik_monarchy
        add_legitimacy = -20
        change_government_reform_progress = -50
    }
}

country_event = { #Kalargan culture
    id = nafa.14
    title = nafa.14.t
    desc = nafa.14.d
    picture = REFORM_eventPicture
    fire_only_once = yes
    is_triggered_only = yes

    option = { #Warriors
        name = nafa.14.a
        ai_chance = { factor = 1 }
        add_country_modifier = {
            name = klg_warriors
            duration = 12775
        }
        add_estate_loyalty = {
            estate = estate_nobles
            loyalty = 25
        }
        add_estate_loyalty = {
            estate = estate_burghers
            loyalty = -10
        }
    }

    option = { #Peaceful
        name = nafa.14.b
        ai_chance = { factor = 1 }
        add_country_modifier = {
            name = klg_artisans
            duration = 12775
        }
        add_estate_loyalty = {
            estate = estate_burghers
            loyalty = 25
        }
        add_estate_loyalty = {
            estate = estate_nobles
            loyalty = -10
        }
    }
}

country_event = { #Colossus Destroyed
    id = nafa.15
    title = nafa.15.t
    desc = nafa.15.d
    picture = EP_ISLAND_eventPicture
    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = nafa.15.a
        ai_chance = { factor = 1 }
        5361 = {
            destroy_great_project = {
                type = agixion_colossus
            }
            add_province_modifier = {
                name = klg_stil_daniil
                duration = -1
            }
        }
    }
}